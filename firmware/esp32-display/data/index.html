<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoCore Display - Configura√ß√£o</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöó</text></svg>">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üöó</span>
                <div class="logo-text">
                    <h1>AutoCore Display</h1>
                    <p>Configura√ß√£o do Sistema de Display</p>
                </div>
            </div>
            <div class="system-info">
                <div class="info-item">
                    <span class="info-label">Status:</span>
                    <span class="info-value" id="systemStatus">Carregando...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">UUID:</span>
                    <span class="info-value" id="deviceUUID">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Firmware:</span>
                    <span class="info-value">v1.0.0</span>
                </div>
            </div>
        </header>

        <main class="main">
            <div id="loadingOverlay" class="loading-overlay">
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <p>Carregando configura√ß√µes...</p>
                </div>
            </div>

            <div id="statusMessage" class="status-message" style="display: none;"></div>

            <div class="tabs">
                <button class="tab-button active" onclick="showTab('basic')">
                    üì± B√°sico
                </button>
                <button class="tab-button" onclick="showTab('network')">
                    üåê Rede
                </button>
                <button class="tab-button" onclick="showTab('backend')">
                    üîó Backend
                </button>
                <button class="tab-button" onclick="showTab('advanced')">
                    ‚öôÔ∏è Avan√ßado
                </button>
                <button class="tab-button" onclick="showTab('status')">
                    üìä Status
                </button>
            </div>

            <div class="tab-content">
                <!-- Tab: B√°sico -->
                <div id="basic" class="tab-panel active">
                    <div class="card">
                        <div class="card-header">
                            <h3>üè∑Ô∏è Identifica√ß√£o do Dispositivo</h3>
                            <p>Configure o nome e identifica√ß√£o do display</p>
                        </div>
                        <div class="card-content">
                            <div class="form-group">
                                <label for="deviceName">Nome do Dispositivo</label>
                                <input type="text" id="deviceName" placeholder="Ex: Display Principal" required>
                                <small>Nome amig√°vel para identificar este display</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="deviceUUIDBrief">UUID do Dispositivo</label>
                                <input type="text" id="deviceUUIDBrief" readonly>
                                <small>Identificador √∫nico (gerado automaticamente)</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Rede -->
                <div id="network" class="tab-panel">
                    <div class="card">
                        <div class="card-header">
                            <h3>üì∂ Configura√ß√£o WiFi</h3>
                            <p>Configure a conex√£o com a rede WiFi</p>
                        </div>
                        <div class="card-content">
                            <div class="form-group">
                                <label for="wifiNetwork">Rede WiFi</label>
                                <div class="input-group">
                                    <select id="wifiNetwork" onchange="toggleCustomSSID()">
                                        <option value="">üîÑ Escaneando redes...</option>
                                    </select>
                                    <button type="button" class="btn-secondary" onclick="scanNetworks()">
                                        üîÑ Atualizar
                                    </button>
                                </div>
                                <small>Selecione uma rede ou escolha "Personalizada"</small>
                            </div>

                            <div class="form-group" id="customSSIDGroup" style="display: none;">
                                <label for="customSSID">SSID Personalizado</label>
                                <input type="text" id="customSSID" placeholder="Nome da rede WiFi">
                                <small>Digite o nome exato da rede</small>
                            </div>

                            <div class="form-group">
                                <label for="wifiPassword">Senha WiFi</label>
                                <div class="input-group">
                                    <input type="password" id="wifiPassword" placeholder="Senha da rede">
                                    <button type="button" class="btn-icon" onclick="togglePassword('wifiPassword')">
                                        üëÅÔ∏è
                                    </button>
                                </div>
                                <small>Deixe em branco para redes abertas</small>
                            </div>

                            <div class="network-test" id="networkTest" style="display: none;">
                                <div class="test-result">
                                    <span class="test-icon">‚úÖ</span>
                                    <span class="test-message">Conex√£o testada com sucesso!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Backend -->
                <div id="backend" class="tab-panel">
                    <div class="card">
                        <div class="card-header">
                            <h3>üîó Servidor Backend</h3>
                            <p>Configure a conex√£o com o servidor AutoCore</p>
                        </div>
                        <div class="card-content">
                            <div class="form-group">
                                <label for="backendHost">Endere√ßo IP do Servidor</label>
                                <input type="text" id="backendHost" placeholder="192.168.1.100" 
                                       pattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$" required>
                                <small>Endere√ßo IP do servidor AutoCore na rede local</small>
                            </div>

                            <div class="form-group">
                                <label for="backendPort">Porta do Servidor</label>
                                <input type="number" id="backendPort" value="8000" min="1" max="65535" required>
                                <small>Porta onde o servidor est√° executando (padr√£o: 8000)</small>
                            </div>

                            <div class="form-group">
                                <label for="apiKey">Chave de API (Opcional)</label>
                                <div class="input-group">
                                    <input type="password" id="apiKey" placeholder="Deixe em branco se n√£o usar">
                                    <button type="button" class="btn-icon" onclick="togglePassword('apiKey')">
                                        üëÅÔ∏è
                                    </button>
                                </div>
                                <small>Chave de API para autentica√ß√£o (se configurada no servidor)</small>
                            </div>

                            <div class="form-group">
                                <button type="button" class="btn-secondary" onclick="testBackendConnection()">
                                    üîç Testar Conex√£o
                                </button>
                            </div>

                            <div class="connection-test" id="backendTest" style="display: none;">
                                <div class="test-result">
                                    <span class="test-icon">‚è≥</span>
                                    <span class="test-message">Testando conex√£o...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Avan√ßado -->
                <div id="advanced" class="tab-panel">
                    <div class="card">
                        <div class="card-header">
                            <h3>‚öôÔ∏è Configura√ß√µes Avan√ßadas</h3>
                            <p>Configura√ß√µes adicionais do sistema</p>
                        </div>
                        <div class="card-content">
                            <div class="form-group">
                                <label for="screenTimeout">Timeout da Tela (segundos)</label>
                                <input type="number" id="screenTimeout" value="30" min="10" max="300">
                                <small>Tempo para escurecer a tela quando inativa</small>
                            </div>

                            <div class="form-group">
                                <label for="brightness">Brilho da Tela (%)</label>
                                <div class="slider-group">
                                    <input type="range" id="brightness" min="10" max="100" value="80" 
                                           oninput="updateBrightnessValue(this.value)">
                                    <span class="slider-value" id="brightnessValue">80%</span>
                                </div>
                                <small>Ajuste o brilho padr√£o da tela</small>
                            </div>

                            <div class="form-group">
                                <label for="debugMode">Modo Debug</label>
                                <div class="switch">
                                    <input type="checkbox" id="debugMode">
                                    <span class="switch-slider"></span>
                                </div>
                                <small>Ativar logs detalhados para diagn√≥stico</small>
                            </div>

                            <div class="form-group">
                                <label for="ntpServer">Servidor NTP</label>
                                <input type="text" id="ntpServer" value="pool.ntp.org" placeholder="pool.ntp.org">
                                <small>Servidor para sincroniza√ß√£o de hor√°rio</small>
                            </div>
                        </div>
                    </div>

                    <div class="card danger-zone">
                        <div class="card-header">
                            <h3>üö® Zona Perigosa</h3>
                            <p>A√ß√µes que podem afetar o funcionamento do sistema</p>
                        </div>
                        <div class="card-content">
                            <div class="danger-actions">
                                <button type="button" class="btn-danger" onclick="factoryReset()">
                                    üîÑ Reset de F√°brica
                                </button>
                                <button type="button" class="btn-warning" onclick="restartDevice()">
                                    ‚ö° Reiniciar Dispositivo
                                </button>
                            </div>
                            <small>‚ö†Ô∏è Use estas op√ß√µes apenas se necess√°rio</small>
                        </div>
                    </div>
                </div>

                <!-- Tab: Status -->
                <div id="status" class="tab-panel">
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-header">
                                <h3>üìä Status do Sistema</h3>
                            </div>
                            <div class="card-content">
                                <div class="status-grid">
                                    <div class="status-item">
                                        <span class="status-label">Estado:</span>
                                        <span class="status-value" id="currentState">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Uptime:</span>
                                        <span class="status-value" id="uptime">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Mem√≥ria livre:</span>
                                        <span class="status-value" id="freeMemory">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">CPU:</span>
                                        <span class="status-value" id="cpuFreq">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3>üì∂ Status da Rede</h3>
                            </div>
                            <div class="card-content">
                                <div class="status-grid">
                                    <div class="status-item">
                                        <span class="status-label">WiFi:</span>
                                        <span class="status-value" id="wifiStatus">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">IP Local:</span>
                                        <span class="status-value" id="localIP">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Sinal:</span>
                                        <span class="status-value" id="signalStrength">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">MQTT:</span>
                                        <span class="status-value" id="mqttStatus">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button type="button" class="btn-secondary" onclick="loadConfiguration()">
                    üîÑ Recarregar
                </button>
                <button type="submit" class="btn-primary" onclick="saveConfiguration()">
                    üíæ Salvar Configura√ß√£o
                </button>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2025 AutoCore Project. Desenvolvido para sistemas embarcados.</p>
            <p>üîß Interface de configura√ß√£o moderna e responsiva</p>
        </footer>
    </div>

    <script src="/app.js"></script>
</body>
</html>