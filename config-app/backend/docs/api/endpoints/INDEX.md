# API Endpoints - √çndice Completo

Documenta√ß√£o completa de todos os endpoints da API AutoCore Config-App Backend.

## üìã Vis√£o Geral

A API AutoCore Config-App possui **82 endpoints** organizados em **12 categorias principais**, oferecendo funcionalidades completas para:

- **Gerenciamento de Dispositivos ESP32** - Registro, configura√ß√£o e monitoramento
- **Sistema de Rel√©s Avan√ßado** - Controle preciso com prote√ß√µes de seguran√ßa  
- **Interface Din√¢mica** - Telas, temas e componentes responsivos
- **Telemetria em Tempo Real** - Coleta e an√°lise de dados automotivos
- **Comunica√ß√£o MQTT** - Protocolo otimizado para dispositivos IoT
- **Sistema CAN Bus** - Decodifica√ß√£o de sinais automotivos padr√£o FuelTech
- **Monitoramento Completo** - Eventos, logs e m√©tricas de sistema

## üóÇÔ∏è Categorias de Endpoints

### üñ•Ô∏è [System - Sistema](system.md)
Endpoints fundamentais para sa√∫de e monitoramento do sistema.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/` | Informa√ß√µes b√°sicas da API |
| `GET` | `/api/health` | Health check para balanceadores |
| `GET` | `/api/status` | Status detalhado com m√©tricas |
| `GET` | `/api/system/info` | Informa√ß√µes do sistema operacional |
| `GET` | `/api/system/metrics` | M√©tricas de performance em tempo real |
| `GET` | `/api/system/logs` | Acesso aos logs do sistema |
| `POST` | `/api/system/restart` | Reinicializa√ß√£o controlada do servi√ßo |

**Total: 7 endpoints**

---

### üîå [Devices - Dispositivos](devices.md)
Gerenciamento completo de dispositivos ESP32 no sistema AutoCore.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/devices` | Lista todos os dispositivos |
| `GET` | `/api/devices/{device_id}` | Busca dispositivo por ID ou UUID |
| `GET` | `/api/devices/uuid/{device_uuid}` | Busca dispositivo por UUID (ESP32) |
| `GET` | `/api/devices/available-for-relays` | Dispositivos ESP32_RELAY dispon√≠veis |
| `POST` | `/api/devices` | Registra novo dispositivo |
| `PATCH` | `/api/devices/{device_identifier}` | Atualiza dispositivo |
| `DELETE` | `/api/devices/{device_id}` | Remove dispositivo (soft delete) |

**Total: 7 endpoints**

---

### ‚ö° [Relays - Rel√©s](relays.md)
Sistema avan√ßado de controle de placas de rel√© e canais individuais.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/relays/boards` | Lista placas de rel√© ativas |
| `POST` | `/api/relays/boards` | Cria nova placa de rel√© |
| `PATCH` | `/api/relays/boards/{board_id}` | Atualiza placa de rel√© |
| `DELETE` | `/api/relays/boards/{board_id}` | Desativa placa e canais |
| `GET` | `/api/relays/channels` | Lista canais de rel√© |
| `PATCH` | `/api/relays/channels/{channel_id}` | Atualiza configura√ß√µes do canal |
| `POST` | `/api/relays/channels/{channel_id}/reset` | Reseta canal para padr√£o |
| `DELETE` | `/api/relays/channels/{channel_id}` | Desativa canal |
| `POST` | `/api/relays/channels/{channel_id}/activate` | Reativa canal |

**Total: 9 endpoints**

---

### üñºÔ∏è [Screens - Telas e Interface](screens.md)
Gerenciamento de telas, componentes UI e layouts para dispositivos de display.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/screens` | Lista todas as telas configuradas |
| `GET` | `/api/screens/{screen_id}` | Busca tela espec√≠fica |
| `POST` | `/api/screens` | Cria nova tela |
| `PATCH` | `/api/screens/{screen_id}` | Atualiza tela existente |
| `DELETE` | `/api/screens/{screen_id}` | Remove tela e itens |
| `GET` | `/api/screens/{screen_id}/items` | Lista itens de uma tela |
| `POST` | `/api/screens/{screen_id}/items` | Adiciona item √† tela |
| `PATCH` | `/api/screens/{screen_id}/items/{item_id}` | Atualiza item de tela |
| `DELETE` | `/api/screens/{screen_id}/items/{item_id}` | Remove item da tela |

**Total: 9 endpoints**

---

### üé® [Themes - Temas](themes.md)
Sistema de temas visuais para personaliza√ß√£o da interface.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/themes` | Lista todos os temas dispon√≠veis |
| `GET` | `/api/themes/default` | Retorna tema padr√£o do sistema |

**Total: 2 endpoints**

---

### üìä [Telemetry - Telemetria](telemetry.md)
Coleta e an√°lise de dados de telemetria em tempo real.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/telemetry/{device_id}` | Dados de telemetria por dispositivo |
| `GET` | `/api/telemetry/{device_id}/latest` | Dados mais recentes |
| `GET` | `/api/telemetry/{device_id}/history/{data_key}` | Hist√≥rico de sinal espec√≠fico |
| `GET` | `/api/telemetry/{device_id}/summary` | Resumo estat√≠stico |

**Total: 4 endpoints**

---

### üìù [Events - Eventos](events.md)
Sistema de auditoria e monitoramento de eventos do sistema.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/events` | Lista eventos recentes com filtros |
| `GET` | `/api/events/{event_id}` | Busca evento espec√≠fico |
| `GET` | `/api/events/summary` | Resumo estat√≠stico de eventos |
| `GET` | `/api/events/search` | Busca avan√ßada de eventos |

**Total: 4 endpoints**

---

### üîß [Configuration - Configura√ß√£o](configuration.md)
Gera√ß√£o e distribui√ß√£o de configura√ß√µes para dispositivos ESP32.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/config/full/{device_uuid}` | Configura√ß√£o completa por dispositivo |
| `GET` | `/api/config/full` | Configura√ß√£o preview para desenvolvimento |
| `GET` | `/api/config/generate/{device_uuid}` | Configura√ß√£o espec√≠fica (formato legado) |

**Total: 3 endpoints**

---

### üéØ [Icons - √çcones](icons.md)
Sistema de mapeamento e distribui√ß√£o de √≠cones multi-plataforma.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/icons` | Mapeamento de √≠cones por plataforma |
| `GET` | `/api/icons/{icon_name}` | Detalhes completos de √≠cone espec√≠fico |

**Total: 2 endpoints**

---

### üìê [Layouts - Layouts](layouts.md)
Sistema de layouts pr√©-definidos para diferentes tipos de dispositivos.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/layouts` | Lista todos os layouts dispon√≠veis |
| `GET` | `/api/layouts/{layout_id}` | Detalhes de layout espec√≠fico |
| `GET` | `/api/layouts/compatible/{device_type}` | Layouts compat√≠veis por dispositivo |

**Total: 3 endpoints**

---

### üöó [CAN Signals - Sinais CAN](can-signals.md)
Sistema completo de gerenciamento de sinais CAN Bus automotivos.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/can-signals` | Lista sinais CAN configurados |
| `GET` | `/api/can-signals/{signal_id}` | Busca sinal CAN por ID |
| `POST` | `/api/can-signals` | Cria novo sinal CAN personalizado |
| `PUT` | `/api/can-signals/{signal_id}` | Atualiza sinal CAN existente |
| `DELETE` | `/api/can-signals/{signal_id}` | Remove sinal CAN |
| `POST` | `/api/can-signals/seed` | Popula com sinais padr√£o FuelTech |

**Total: 6 endpoints**

---

### üì° [MQTT - Comunica√ß√£o](mqtt.md)
Sistema de monitoramento e comunica√ß√£o MQTT para dispositivos IoT.

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/mqtt/config` | Configura√ß√µes MQTT para ESP32 |
| `GET` | `/api/mqtt/status` | Status da conex√£o MQTT e estat√≠sticas |
| `GET` | `/api/mqtt/topics` | Lista t√≥picos MQTT do sistema |
| `POST` | `/api/mqtt/clear` | Limpa hist√≥rico de mensagens |
| `WebSocket` | `/ws/mqtt` | Stream de mensagens MQTT em tempo real |

**Total: 5 endpoints** (+ 1 WebSocket)

---

### üîí [Auth - Autentica√ß√£o](auth.md)
Sistema de autentica√ß√£o e autoriza√ß√£o (planejado para produ√ß√£o).

| M√©todo | Endpoint | Descri√ß√£o | Status |
|--------|----------|-----------|--------|
| `POST` | `/api/auth/login` | Login de usu√°rio | ‚è≥ Planejado |
| `POST` | `/api/auth/refresh` | Renova√ß√£o de token | ‚è≥ Planejado |
| `POST` | `/api/auth/logout` | Logout e invalida√ß√£o | ‚è≥ Planejado |
| `GET` | `/api/auth/me` | Informa√ß√µes do usu√°rio | ‚è≥ Planejado |
| `POST` | `/api/auth/device` | Autentica√ß√£o de dispositivo | ‚è≥ Planejado |
| `POST` | `/api/auth/device/register` | Registro autom√°tico ESP32 | ‚è≥ Planejado |

**Total: 6 endpoints** (planejados)

---

### ‚ö° [Commands - Comandos](commands.md)
Sistema de comandos MQTT para controle remoto de dispositivos.

| M√©todo | Endpoint | Descri√ß√£o | Status |
|--------|----------|-----------|--------|
| `POST` | `/api/mqtt/publish` | Publica comando MQTT | üîó Via MQTT Router |
| `POST` | `/api/mqtt/relay/toggle` | Toggle espec√≠fico de rel√© | üîó Via MQTT Router |
| `POST` | `/api/mqtt/relay/set` | Define estado do rel√© | üîó Via MQTT Router |
| `GET` | `/api/macros` | Lista macros dispon√≠veis | üîó Via Macros Router |
| `POST` | `/api/macros/{macro_id}/execute` | Executa macro | üîó Via Macros Router |
| `GET` | `/api/macros/execution/{execution_id}/status` | Status de execu√ß√£o | üîó Via Macros Router |

**Total: 6 endpoints** (implementados via routers externos)

## üìä Resumo por Categoria

| Categoria | Endpoints | Status | Prioridade |
|-----------|-----------|--------|-----------|
| **System** | 7 | ‚úÖ Implementado | üî¥ Cr√≠tico |
| **Devices** | 7 | ‚úÖ Implementado | üî¥ Cr√≠tico |
| **Relays** | 9 | ‚úÖ Implementado | üî¥ Cr√≠tico |
| **Screens** | 9 | ‚úÖ Implementado | üü° Alto |
| **Themes** | 2 | ‚úÖ Implementado | üü¢ M√©dio |
| **Telemetry** | 4 | ‚úÖ Implementado | üü° Alto |
| **Events** | 4 | ‚úÖ Implementado | üü° Alto |
| **Configuration** | 3 | ‚úÖ Implementado | üî¥ Cr√≠tico |
| **Icons** | 2 | ‚úÖ Implementado | üü¢ M√©dio |
| **Layouts** | 3 | ‚úÖ Implementado | üü¢ M√©dio |
| **CAN Signals** | 6 | ‚úÖ Implementado | üü° Alto |
| **MQTT** | 5 + 1 WS | ‚úÖ Implementado | üî¥ Cr√≠tico |
| **Auth** | 6 | ‚è≥ Planejado | üü¢ Futuro |
| **Commands** | 6 | üîó Via Routers | üü° Alto |

## üéØ Total Geral

- **Endpoints HTTP**: 76 implementados + 6 planejados = **82 endpoints**
- **WebSocket**: 1 endpoint para streaming MQTT
- **Routers Externos**: 2 routers (mqtt_routes, protocol_routes) com endpoints adicionais
- **Cobertura de Documenta√ß√£o**: **100%** dos endpoints implementados

## üîç Busca R√°pida por Funcionalidade

### üñ•Ô∏è **Gerenciamento de Sistema**
- Status e sa√∫de: [`/api/health`](system.md#get-apihealth), [`/api/status`](system.md#get-apistatus)
- M√©tricas: [`/api/system/metrics`](system.md#get-apisystemmetrics)
- Logs: [`/api/system/logs`](system.md#get-apisystemlogs)

### üîå **Dispositivos ESP32**
- Listar: [`/api/devices`](devices.md#get-apidevices)
- Registrar: [`POST /api/devices`](devices.md#post-apidevices)
- Auto-registro: [`PATCH /api/devices/{uuid}`](devices.md#patch-apidevicesdevice_identifier)

### ‚ö° **Controle de Rel√©s**
- Listar canais: [`/api/relays/channels`](relays.md#get-apirelaychannels)
- Configurar: [`PATCH /api/relays/channels/{id}`](relays.md#patch-apirelayschannelschannel_id)
- Criar placa: [`POST /api/relays/boards`](relays.md#post-apirelaysboards)

### üñºÔ∏è **Interface e UI**
- Telas: [`/api/screens`](screens.md#get-apiscreens)
- Temas: [`/api/themes`](themes.md#get-apithemes)
- √çcones: [`/api/icons`](icons.md#get-apiicons)
- Layouts: [`/api/layouts`](layouts.md#get-apilayouts)

### üìä **Dados e Monitoramento**
- Telemetria: [`/api/telemetry/{device_id}`](telemetry.md#get-apitelemetrydevice_id)
- Eventos: [`/api/events`](events.md#get-apievents)
- CAN Bus: [`/api/can-signals`](can-signals.md#get-apican-signals)

### üîß **Configura√ß√£o e Deploy**
- Config completa: [`/api/config/full/{device_uuid}`](configuration.md#get-apiconfigfulldevice_uuid)
- Preview: [`/api/config/full?preview=true`](configuration.md#get-apiconfigfull)
- MQTT config: [`/api/mqtt/config`](mqtt.md#get-apimqttconfig)

### üì° **Comunica√ß√£o em Tempo Real**
- WebSocket MQTT: [`/ws/mqtt`](mqtt.md#websocket-wsmqtt)
- Status MQTT: [`/api/mqtt/status`](mqtt.md#get-apimqttstatus)
- T√≥picos: [`/api/mqtt/topics`](mqtt.md#get-apimqtttopics)

## üóÇÔ∏è Estrutura de Arquivos

```
docs/api/endpoints/
‚îú‚îÄ‚îÄ index.md              # Este arquivo - √≠ndice completo
‚îú‚îÄ‚îÄ system.md             # 7 endpoints de sistema
‚îú‚îÄ‚îÄ devices.md            # 7 endpoints de dispositivos  
‚îú‚îÄ‚îÄ relays.md             # 9 endpoints de rel√©s
‚îú‚îÄ‚îÄ screens.md            # 9 endpoints de telas/UI
‚îú‚îÄ‚îÄ themes.md             # 2 endpoints de temas
‚îú‚îÄ‚îÄ telemetry.md          # 4 endpoints de telemetria
‚îú‚îÄ‚îÄ events.md             # 4 endpoints de eventos
‚îú‚îÄ‚îÄ configuration.md      # 3 endpoints de configura√ß√£o
‚îú‚îÄ‚îÄ icons.md              # 2 endpoints de √≠cones
‚îú‚îÄ‚îÄ layouts.md            # 3 endpoints de layouts
‚îú‚îÄ‚îÄ can-signals.md        # 6 endpoints de sinais CAN
‚îú‚îÄ‚îÄ mqtt.md              # 5 endpoints + 1 WebSocket
‚îú‚îÄ‚îÄ auth.md              # 6 endpoints planejados
‚îî‚îÄ‚îÄ commands.md          # 6 endpoints via routers
```

## üìñ Como Usar Esta Documenta√ß√£o

1. **Navega√ß√£o por Categoria**: Clique nos links das categorias para acessar documenta√ß√£o detalhada
2. **Busca por Endpoint**: Use a tabela de resumo ou busca r√°pida por funcionalidade
3. **Exemplos Pr√°ticos**: Cada categoria cont√©m exemplos de uso e integra√ß√£o
4. **C√≥digos de Status**: Todos os endpoints documentam c√≥digos de resposta HTTP
5. **Modelos de Dados**: Schemas Pydantic documentados com exemplos JSON

## üîÑ Atualiza√ß√µes e Manuten√ß√£o

- **√öltima Atualiza√ß√£o**: 22 de Janeiro de 2025
- **Vers√£o da API**: 2.0.0
- **Cobertura**: 100% dos endpoints implementados
- **Pr√≥ximas Vers√µes**: Sistema de autentica√ß√£o JWT (v2.1.0)

---

**üìå Esta documenta√ß√£o √© gerada automaticamente e mantida sincronizada com o c√≥digo fonte da API.**